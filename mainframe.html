<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OMEGA // TIGRANES SYSTEM</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <style>
        /* –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ª—ç–π–∞—É—Ç–∞ –æ–±–æ–ª–æ—á–∫–∏ */
        body { display: grid; grid-template-rows: 50px 1fr 30px; height: 100vh; overflow: hidden; }
        
        /* HEADER */
        header {
            background: #050505; border-bottom: 1px solid #333;
            display: flex; align-items: center; justify-content: space-between; padding: 0 15px;
            z-index: 200;
        }
        .logo-area { display: flex; align-items: center; gap: 10px; font-weight: bold; letter-spacing: 2px; }
        .logo-img { width: 30px; filter: grayscale(100%); }
        
        .sys-status { display: flex; gap: 15px; font-size: 11px; align-items: center; }
        
        /* MUTE BUTTON */
        #mute-btn {
            background: transparent; border: 1px solid #333; color: #666;
            width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.3s;
        }
        #mute-btn:hover { border-color: var(--term-green); color: var(--term-green); }
        #mute-btn.active { color: red; border-color: red; }

        /* LAYOUT */
        .layout-grid { display: grid; grid-template-columns: 240px 1fr 280px; height: 100%; position: relative; }

        /* SIDEBAR */
        aside.left-panel {
            background: #020202; border-right: 1px solid #333;
            display: flex; flex-direction: column; padding: 10px 0; overflow-y: auto;
        }
        .nav-item {
            padding: 12px 20px; color: #888; font-size: 13px; cursor: pointer; border-left: 2px solid transparent;
            display: flex; align-items: center; gap: 10px;
        }
        .nav-item:hover { color: #fff; background: #080808; }
        .nav-item.active { border-left-color: var(--term-green); color: var(--term-green); background: rgba(0,255,65,0.05); }
        .nav-header { font-size: 10px; color: #444; margin: 15px 0 5px 20px; letter-spacing: 2px; font-weight: bold; }

        /* MAIN SCREEN */
        main { position: relative; background: #000; overflow: hidden; }
        iframe {
            width: 100%; height: 100%; border: none;
            transition: opacity 0.3s ease;
            opacity: 1;
        }
        iframe.loading { opacity: 0; } /* –î–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ */

        /* LOGS PANEL */
        aside.right-panel {
            background: #030303; border-left: 1px solid #333;
            display: flex; flex-direction: column; padding: 10px;
            font-size: 11px; color: #666;
        }
        #log-feed { flex-grow: 1; overflow-y: hidden; display: flex; flex-direction: column; justify-content: flex-end; }
        .log-line { margin-bottom: 4px; border-bottom: 1px dashed #111; padding-bottom: 2px; }
        .log-ts { color: var(--term-green); margin-right: 5px; }

        /* FOOTER */
        footer {
            background: #000; border-top: 1px solid #333;
            display: flex; align-items: center; justify-content: space-between;
            font-size: 11px; color: #555;
        }
        .ticker { flex-grow: 1; overflow: hidden; white-space: nowrap; margin-right: 20px; position: relative; }
        .ticker span { display: inline-block; padding-left: 100%; animation: scrollText 20s linear infinite; color: var(--term-green); }
        @keyframes scrollText { 0% {transform:translateX(0);} 100% {transform:translateX(-100%);} }
        
        .user-badge { padding: 0 15px; border-left: 1px solid #333; color: #fff; font-weight: bold; }

        /* MOBILE OVERRIDES */
        @media (max-width: 900px) {
            .layout-grid { display: flex; flex-direction: column; }
            aside.right-panel { display: none; }
            .sys-status span { display: none; } /* –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç –≤ —Ö–µ–¥–µ—Ä–µ */
            #mute-btn { display: flex; }
            .ticker { display: none; } /* –¢–∏–∫–µ—Ä –º–µ—à–∞–µ—Ç –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ */
        }
    </style>
</head>
<body>
    
    <header>
        <div class="logo-area">
            <button class="mobile-menu-btn" onclick="toggleMenu()">‚ò∞</button>
            <img src="https://upload.wikimedia.org/wikipedia/commons/2/25/Seal_of_the_Central_Intelligence_Agency.svg" class="logo-img">
            OMEGA // CORE
        </div>
        <div class="sys-status">
            <span class="text-alert">‚óè SYSTEM LIVE</span>
            <span>SERVER: DC_NODE_04</span>
            <button id="mute-btn" onclick="toggleMute()" title="Toggle Sound">üîä</button>
        </div>
    </header>

    <div class="layout-grid">
        
        <aside class="left-panel" id="sidebar">
            <div class="nav-header">COMMAND MODULES</div>
            <div class="nav-item active" onclick="loadFrame('modules/dashboard.html', this)">DASHBOARD</div>
            <div class="nav-item" onclick="loadFrame('modules/map.html', this)">GEO-TACTICAL MAP</div>
            <div class="nav-item" onclick="loadFrame('modules/terminal.html', this)">ROOT TERMINAL</div>
            
            <div class="nav-header">DATABASE</div>
            <div class="nav-item" onclick="loadFrame('modules/targets.html', this)">TARGET PROFILES</div>
            <div class="nav-item" onclick="loadFrame('modules/clones.html', this)">CLONE MANAGER</div>
            <div class="nav-item" onclick="loadFrame('modules/finance.html', this)">SHADOW FINANCE</div>
            <div class="nav-item" onclick="loadFrame('modules/flight_logs.html', this)">FLIGHT LOGS</div>
            
            <div class="nav-header">SURVEILLANCE</div>
            <div class="nav-item" onclick="loadFrame('modules/cctv.html', this)">LIVE CCTV</div>
            <div class="nav-item" onclick="loadFrame('modules/intercepts.html', this)">INTERCEPTS</div>
            <div class="nav-item" onclick="loadFrame('modules/evidence.html', this)">EVIDENCE LOCKER</div>

            <div style="flex-grow: 1"></div>
            <div class="nav-item" style="color: var(--alert-red); border-top: 1px solid #333; margin-top: 20px;" onclick="triggerSigma()">
                ‚ö† PROJECT SIGMA
            </div>
        </aside>

        <main onclick="closeMenu()">
            <iframe src="modules/dashboard.html" id="main-frame"></iframe>
        </main>

        <aside class="right-panel">
            <div style="border-bottom: 1px solid #333; padding-bottom: 5px; color: #fff;">SYSTEM LOGS</div>
            <div id="log-feed">
                </div>
        </aside>
    </div>

    <footer>
        <div class="ticker">
            <span>BREAKING: ELON MUSK DECLARES HIMSELF 'EMPEROR OF MARS' +++ REPTILIAN STRIKE ENDS IN LONDON +++ BITCOIN REACHES $1M THEN CRASHES TO $0 +++ TIGRANES DETECTED IN SYSTEM +++</span>
        </div>
        <div class="user-badge" id="user-display">USER: TIGRANES</div>
    </footer>

    <div id="sigma-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000; z-index:9999; flex-direction:column; align-items:center; justify-content:center;">
        <h1 style="font-size: 5vw; color: #fff;">IT WAS ME</h1>
        <h2 style="font-size: 3vw; color: red;">ALL ALONG</h2>
        <img src="assets/img/YOU_SIGMA.jpg" style="width: 300px; border: 5px solid #fff; margin-top: 20px;">
    </div>

    <audio id="bg-music" loop src="audio/placing_the_blame_intro.mp3"></audio>

    <script src="assets/js/main.js"></script>
    <script>
        // --- –õ–û–ì–ò–ö–ê –û–ë–û–õ–û–ß–ö–ò ---
        
        // 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        const user = OmegaSystem.state.user || "TIGRANES";
        document.getElementById('user-display').innerText = "USER: " + user;
        addLog("SYSTEM BOOT SEQUENCE COMPLETE");
        addLog("BIOMETRIC VERIFIED: " + user);

        // –ú—É–∑—ã–∫–∞ (–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–ª–∏–∫–µ)
        document.body.addEventListener('click', () => {
            const bg = document.getElementById('bg-music');
            if(bg.paused && !OmegaSystem.state.isMuted) { 
                bg.volume = 0.2; bg.play(); 
            }
        }, {once:true});

        // 2. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ñ—Ä–µ–π–º–æ–≤ (—Å Fade —ç—Ñ—Ñ–µ–∫—Ç–æ–º)
        function loadFrame(url, btn) {
            const frame = document.getElementById('main-frame');
            
            // UI
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            btn.classList.add('active');
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            frame.classList.add('loading');
            soundClick();
            
            setTimeout(() => {
                frame.src = url;
                // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏
                frame.onload = () => {
                    frame.classList.remove('loading');
                    addLog("MODULE LOADED: " + btn.innerText);
                };
            }, 300); // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞

            closeMenu();
        }

        // 3. Mute Button
        function toggleMute() {
            const isMuted = toggleGlobalMute(); // –§—É–Ω–∫—Ü–∏—è –∏–∑ main.js
            const btn = document.getElementById('mute-btn');
            const bg = document.getElementById('bg-music');
            
            if(isMuted) {
                btn.innerText = "üîá";
                btn.classList.add('active');
                bg.pause();
            } else {
                btn.innerText = "üîä";
                btn.classList.remove('active');
                bg.play();
            }
        }

        // 4. –õ–æ–≥–≥–µ—Ä
        function addLog(msg) {
            const feed = document.getElementById('log-feed');
            const time = new Date().toLocaleTimeString('en-US', {hour12:false});
            const div = document.createElement('div');
            div.className = 'log-line fade-in';
            div.innerHTML = `<span class="log-ts">[${time}]</span> ${msg}`;
            feed.appendChild(div);
            feed.scrollTop = feed.scrollHeight;
        }

        // 5. –†–∞–Ω–¥–æ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
        setInterval(() => {
            const logs = [
                "Ping from Antarctica Base [OK]",
                "Intercepted Telegram packet: 'PizzaGate 2.0'",
                "Neuralink update uploading... 45%",
                "Satellite connection stable",
                "Suppressing Reddit leak...",
                "Financial transfer: $5B -> Cayman Islands"
            ];
            if(Math.random() > 0.6) addLog(logs[Math.floor(Math.random() * logs.length)]);
        }, 4000);

        // 6. Mobile Menu
        function toggleMenu() {
            document.getElementById('sidebar').classList.toggle('mobile-open');
        }
        function closeMenu() {
            document.getElementById('sidebar').classList.remove('mobile-open');
        }

        // 7. Sigma Final
        function triggerSigma() {
            document.getElementById('sigma-overlay').style.display = 'flex';
            document.getElementById('bg-music').pause();
            addLog("!!! PROJECT SIGMA ACTIVATED !!!");
        }
    </script>
</body>
</html>